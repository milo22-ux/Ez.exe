if not getgenv().Key or getgenv().Key == "" then
    warn("❌ No whitelist key found! Define getgenv().Key before running.")
    return
end

local hwid = gethwid()
if not hwid then
    warn("❌ Executor does not support gethwid()")
    return
end

local url = "https://whitelist-azwm.vercel.app/api/vaildate?key=" .. getgenv().Key .. "&hwid=" .. hwid

local function validate()
    local success, response = pcall(function()
        return game:HttpGet(url)
    end)

    if not success then
        return false, "REQUEST_ERROR"
    end

    if response == "OK" then
        return true, "WHITELISTED"
    else
        return false, response
    end
end

local valid, reason = validate()
if not valid then
    warn("❌ Access denied: " .. reason)
    return
end

print("✅ Whitelist passed.")
