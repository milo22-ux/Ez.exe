local key = rawget(getgenv(), "Key") or rawget(getfenv(0), "Key")
local hwid = gethwid()

if not key or key == "" then
    return warn("❌ No key found. Use: getgenv().Key = \"your_key\"")
end

if not hwid then
    return warn("❌ HWID not found. Your executor must support gethwid().")
end

local API_URL = "https://whitelist-ofs2.vercel.app/api/vaildate?key=" .. key .. "&hwid=" .. hwid

local function validateKey()
    local success, response = pcall(function()
        return game:HttpGet(API_URL)
    end)

    if not success then
        return false, "REQUEST_ERROR"
    end

    if response == "OK" then return true, "WHITELISTED" end
    return false, response
end

local valid, reason = validateKey()
if not valid then
    warn("❌ Access denied:", reason)
    return
end

print("✅ Whitelist passed.")
print("hi")
